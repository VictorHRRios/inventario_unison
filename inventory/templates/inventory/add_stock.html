{% extends "base.html" %}
{% load crispy_forms_filters %}
{% load crispy_forms_tags %}

{% block content %}
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Google Fonts -->
        <link href='http://fonts.googleapis.com/css?family=Titillium+Web:400,200,300,700,600' rel='stylesheet'
              type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300' rel='stylesheet'
              type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Raleway:400,100' rel='stylesheet' type='text/css'>

    </head>

    <style>

        .product-big-title-area {

            margin-bottom: 20px;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        .description {
            font-size: 16px;
        }

        html img {
            max-width: 100%;
            width: 225px;
            height: 225px;
            border-radius: 25%;
            margin-bottom: 10px;

        }

        .single-shop-product {

            background-color: rgb(255, 255, 255);
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            border-radius: 25%;
            margin-top: 1cm;
        }

    </style>

    <body>

    <div class="product-big-title-area">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="product-bit-title text-center">
                        <h2>Solicitar Artículo</h2>
                    </div>
                </div>
            </div>
        </div>
        <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Filtrar
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item text-center" href="#">En existencia</a>
                <a class="dropdown-item text-center" href="#">Papelería</a>
                <a class="dropdown-item text-center" href="#">Limpieza</a>
                <a class="dropdown-item text-center" href="#">Plomería</a>
                <a class="dropdown-item text-center" href="#">Electricidad</a>
            </div>
        </div>
    </div>

    <div class="single-product-area">
        <div class="zigzag-bottom"></div>
        <div class="container">
            <div class="row">
                {% for items in item %}
                    <div class="col-md-3 col-sm-6">
                        <div class="single-shop-product text-center">
                            <div class="product-upper">
                                <img src="{{ items.image.url }}"
                                     alt="Imagen">
                            </div>
                            <h2><a style="color: black" href="{% url 'display_item' items.id %}">{{ items.name }}</a>
                            </h2>
                            <a class="description">Descripcion: {{ items.description }}</a>
                            <br>
                            <a class="stock">Disponibilidad: {{ items.stock }}</a>
                            <br>
                            <div class="container mt-5">
                                <form method="post" action="{% url 'add_to_stock' items.id %}">
                                    {% csrf_token %}
                                    <select name="quantity" class="form-select form-select-sm"
                                            aria-label="Small select example">
                                        <option selected>1</option>
                                        <option value=2>2</option>
                                        <option value=3>3</option>
                                        <option value=4>4</option>
                                        <option value=5>5</option>
                                        <option value=6>6</option>
                                        <option value=7>7</option>
                                        <option value=8>8</option>
                                        <option value=9>9</option>
                                        <option value=10>10</option>
                                    </select>
                                    <button type="submit" class="btn btn-primary">Agregar stock</button>
                                </form>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <table class="table">
            {% if cart_items.count == 0 %}
                <br>
                <h style="color: red; position: relative; top: -10px; font-weight: 1000;">No hay objetos que añadir</h>
                <button type="submit" class="btn btn-success btn-block mb-2 disabled">Confirmar Compra</button>
            {% else %}
                <table class="table">
                    <thead>
                    <tr>
                        <th>Objeto</th>
                        <th>Cantidad</th>
                        <th>Eliminar</th>
                    </tr>
                    </thead>
                    <tbody>
                    <br>
                    {% for item in cart_items %}
                        <tr>
                            <div class="ml-3 d-inline-block align-middle">
                                <td class="border-0 align-middle"><strong>{{ item.item.name }}</strong></td>
                            </div>
                            <td class="border-0 align-middle"><strong>{{ item.quantity }}</strong></td>
                            <td class="border-0 align-middle">
                                <div class="form-group">
                                    <div class="btn">
                                        <form method="get" action="{% url 'remove_item_stock' item.id %}">
                                            <button class="btn btn-outline-danger"
                                                    onclick="return confirmDelete();" type="submit">
                                                Eliminar
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
                <form method="post" action="{% url 'save_input' %}">
                    {% csrf_token %}
                    <h4 style="margin-top: 2cm; margin-bottom: 50px;">Justificación</h4>
                    <div class="mb-3">
                                        <textarea name="reason" class="form-control" id="exampleFormControlTextarea1"
                                                  rows="3"
                                                  placeholder="Especifica por que necesitas estos objetos."></textarea>
                    </div>
                    <button type="submit" class="btn btn-success btn-block mb-2">Confirmar Transaccion</button>
                </form>
            {% endif %}

        </table>
    </div>
    </body>
    </html>
{% endblock content %}